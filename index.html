<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MDView â€” Markdown Editor</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&family=JetBrains+Mono:wght@300;400;500&family=Spectral:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400;1,500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/src/styles.css">
</head>
<body>
  <div id="app">
    <!-- Exit Fullscreen Button -->
    <button class="exit-fullscreen" id="exit-fullscreen">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"/>
      </svg>
      <span>Exit Fullscreen</span>
      <kbd>Esc</kbd>
    </button>

    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <h1 class="logo">
          <span class="logo-mark">M</span>
          <span class="logo-text">DView</span>
        </h1>
      </div>
      <div class="header-center">
        <div class="document-title">
          <input type="text" id="doc-title" value="Untitled" spellcheck="false" />
          <span class="title-underline"></span>
        </div>
      </div>
      <div class="header-right">
        <!-- Theme Toggle -->
        <button class="theme-toggle" id="theme-toggle" title="Toggle Light/Dark Mode">
          <svg class="theme-icon sun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"/>
            <line x1="12" y1="1" x2="12" y2="3"/>
            <line x1="12" y1="21" x2="12" y2="23"/>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
            <line x1="1" y1="12" x2="3" y2="12"/>
            <line x1="21" y1="12" x2="23" y2="12"/>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
          </svg>
          <svg class="theme-icon moon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </button>
        <div class="header-divider"></div>
        <div class="view-toggle">
          <button class="toggle-btn active" data-view="split" title="Split View">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2"/>
              <line x1="12" y1="3" x2="12" y2="21"/>
            </svg>
          </button>
          <button class="toggle-btn" data-view="edit" title="Edit Only">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 20h9"/>
              <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
            </svg>
          </button>
          <button class="toggle-btn" data-view="preview" title="Preview Only">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
          </button>
        </div>
      </div>
    </header>

    <!-- Toolbar backdrop for closing dropdowns -->
    <div class="toolbar-backdrop" id="toolbar-backdrop"></div>

    <!-- Toolbar -->
    <div class="toolbar">
      <!-- File Group -->
      <div class="toolbar-group" data-group="file">
        <button class="toolbar-group-header" aria-expanded="true" aria-haspopup="true" type="button">
          <svg class="group-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
            <polyline points="14 2 14 8 20 8"/>
          </svg>
          <span class="group-label">File</span>
          <svg class="chevron" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="6 9 12 15 18 9"/>
          </svg>
        </button>
        <div class="toolbar-group-items">
          <button class="tool-btn" id="btn-new" title="New Document">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
              <polyline points="14 2 14 8 20 8"/>
              <line x1="12" y1="18" x2="12" y2="12"/>
              <line x1="9" y1="15" x2="15" y2="15"/>
            </svg>
            <span>New</span>
          </button>
          <button class="tool-btn" id="btn-open" title="Open Markdown File">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M5 19a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h4l2 2h9a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5z"/>
              <path d="M3 7v10"/>
            </svg>
            <span>Open</span>
          </button>
          <button class="tool-btn" id="btn-save" title="Save (Ctrl+S)">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
              <polyline points="17 21 17 13 7 13 7 21"/>
              <polyline points="7 3 7 8 15 8"/>
            </svg>
            <span>Save</span>
          </button>
          <button class="tool-btn" id="btn-save-as" title="Save As (Ctrl+Shift+S)">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M17 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
              <polyline points="15 21 15 15 7 15 7 21"/>
              <polyline points="7 3 7 8 13 8"/>
              <path d="M18 15l3 3m0 0l-3 3m3-3H14"/>
            </svg>
            <span>Save As</span>
          </button>
          <button class="tool-btn" id="btn-export" title="Export as HTML">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7 10 12 15 17 10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
            <span>Export</span>
          </button>
        </div>
      </div>

      <div class="toolbar-divider"></div>

      <!-- Edit Group (Undo/Redo) -->
      <div class="toolbar-group" data-group="edit">
        <button class="toolbar-group-header" aria-expanded="true" aria-haspopup="true" type="button">
          <svg class="group-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="1 4 1 10 7 10"/>
            <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
          </svg>
          <span class="group-label">Edit</span>
          <svg class="chevron" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="6 9 12 15 18 9"/>
          </svg>
        </button>
        <div class="toolbar-group-items">
          <button class="history-btn" id="btn-undo" title="Undo (Ctrl+Z)">
            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="1 4 1 10 7 10"/>
              <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
            </svg>
            <span class="btn-label">Undo</span>
          </button>
          <button class="history-btn" id="btn-redo" title="Redo (Ctrl+Shift+Z)">
            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"/>
              <path d="M20.49 15a9 9 0 1 1-2.13-9.36L23 10"/>
            </svg>
            <span class="btn-label">Redo</span>
          </button>
        </div>
      </div>

      <div class="toolbar-divider"></div>

      <!-- Format Group -->
      <div class="toolbar-group" data-group="format">
        <button class="toolbar-group-header" aria-expanded="true" aria-haspopup="true" type="button">
          <svg class="group-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 7V4h16v3"/>
            <path d="M9 20h6"/>
            <path d="M12 4v16"/>
          </svg>
          <span class="group-label">Format</span>
          <svg class="chevron" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="6 9 12 15 18 9"/>
          </svg>
        </button>
        <div class="toolbar-group-items">
          <button class="format-btn format-text" data-format="bold" title="Bold (Ctrl+B)">
            <span class="fmt-bold">B</span>
            <span class="btn-label">Bold</span>
          </button>
          <button class="format-btn format-text" data-format="italic" title="Italic (Ctrl+I)">
            <span class="fmt-italic">I</span>
            <span class="btn-label">Italic</span>
          </button>
          <button class="format-btn format-text" data-format="strikethrough" title="Strikethrough">
            <span class="fmt-strike">S</span>
            <span class="btn-label">Strikethrough</span>
          </button>
          <button class="format-btn" data-format="code" title="Inline Code">
            <span class="fmt-code">&lt;/&gt;</span>
            <span class="btn-label">Code</span>
          </button>
          <button class="format-btn" data-format="link" title="Insert Link (Ctrl+K)">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
              <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
            </svg>
            <span class="btn-label">Link</span>
          </button>
        </div>
      </div>

      <div class="toolbar-divider"></div>

      <!-- Headings Group -->
      <div class="toolbar-group" data-group="headings">
        <button class="toolbar-group-header" aria-expanded="true" aria-haspopup="true" type="button">
          <svg class="group-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 12h8"/>
            <path d="M4 18V6"/>
            <path d="M12 18V6"/>
            <path d="M17 12l3-2v8"/>
          </svg>
          <span class="group-label">Headings</span>
          <svg class="chevron" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="6 9 12 15 18 9"/>
          </svg>
        </button>
        <div class="toolbar-group-items">
          <button class="format-btn heading-btn" data-format="h1" title="Heading 1">
            <span class="h-label">H<sub>1</sub></span>
            <span class="btn-label">Heading 1</span>
          </button>
          <button class="format-btn heading-btn" data-format="h2" title="Heading 2">
            <span class="h-label">H<sub>2</sub></span>
            <span class="btn-label">Heading 2</span>
          </button>
          <button class="format-btn heading-btn" data-format="h3" title="Heading 3">
            <span class="h-label">H<sub>3</sub></span>
            <span class="btn-label">Heading 3</span>
          </button>
        </div>
      </div>

      <div class="toolbar-divider"></div>

      <!-- Insert Group -->
      <div class="toolbar-group" data-group="insert">
        <button class="toolbar-group-header" aria-expanded="true" aria-haspopup="true" type="button">
          <svg class="group-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="8" x2="12" y2="16"/>
            <line x1="8" y1="12" x2="16" y2="12"/>
          </svg>
          <span class="group-label">Insert</span>
          <svg class="chevron" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="6 9 12 15 18 9"/>
          </svg>
        </button>
        <div class="toolbar-group-items">
          <button class="format-btn" data-format="quote" title="Blockquote">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V21z"/>
              <path d="M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3z"/>
            </svg>
            <span class="btn-label">Quote</span>
          </button>
          <button class="format-btn" data-format="ul" title="Unordered List">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="9" y1="6" x2="20" y2="6"/>
              <line x1="9" y1="12" x2="20" y2="12"/>
              <line x1="9" y1="18" x2="20" y2="18"/>
              <circle cx="4" cy="6" r="2" fill="currentColor" stroke="none"/>
              <circle cx="4" cy="12" r="2" fill="currentColor" stroke="none"/>
              <circle cx="4" cy="18" r="2" fill="currentColor" stroke="none"/>
            </svg>
            <span class="btn-label">Bullet List</span>
          </button>
          <button class="format-btn" data-format="ol" title="Ordered List">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="10" y1="6" x2="20" y2="6"/>
              <line x1="10" y1="12" x2="20" y2="12"/>
              <line x1="10" y1="18" x2="20" y2="18"/>
              <path d="M4 6h1v4" stroke="none" fill="currentColor"/>
              <path d="M3 10h3" stroke="none" fill="currentColor"/>
              <path d="M5 14H3c0-1 2-2 2-3s-1-1.5-2-1" stroke="currentColor" fill="none" stroke-width="1.5"/>
              <path d="M5 19H3c1 0 2-.5 2-1.5S4 16 3 16" stroke="currentColor" fill="none" stroke-width="1.5"/>
            </svg>
            <span class="btn-label">Numbered List</span>
          </button>
          <button class="format-btn" data-format="codeblock" title="Code Block">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="16 18 22 12 16 6"/>
              <polyline points="8 6 2 12 8 18"/>
            </svg>
            <span class="btn-label">Code Block</span>
          </button>
        </div>
      </div>

      <div class="toolbar-spacer"></div>
      <div class="word-count">
        <span id="word-count">0 words</span>
        <span class="divider">|</span>
        <span id="char-count">0 chars</span>
      </div>
    </div>

    <!-- Main Content -->
    <main class="main-content" data-view="split">
      <div class="editor-pane">
        <div class="pane-header">
          <span class="pane-label">Markdown</span>
          <div class="pane-decoration"></div>
        </div>
        <div class="editor-wrapper">
          <div class="line-numbers" id="line-numbers"></div>
          <textarea id="editor" spellcheck="false" placeholder="Start writing your markdown here..."></textarea>
        </div>
      </div>
      <div class="divider-handle" id="divider">
        <div class="divider-line"></div>
        <div class="divider-grip">
          <span></span>
          <span></span>
          <span></span>
        </div>
        <div class="divider-line"></div>
      </div>
      <div class="preview-pane">
        <div class="pane-header">
          <span class="pane-label">Preview</span>
          <div class="pane-decoration"></div>
        </div>
        <div class="preview-wrapper">
          <article id="preview" class="markdown-body"></article>
        </div>
      </div>
    </main>

    <!-- Status Bar -->
    <footer class="status-bar">
      <div class="status-left">
        <span class="status-item" id="cursor-pos">Ln 1, Col 1</span>
      </div>
      <div class="status-right">
        <span class="status-item">Markdown</span>
        <span class="status-item">UTF-8</span>
      </div>
    </footer>

    <!-- Hidden file input -->
    <input type="file" id="file-input" accept=".md,.markdown,.txt" hidden />
  </div>

  <!-- Toast notification -->
  <div id="toast" class="toast"></div>

  <script type="module" src="/src/main.ts"></script>
</body>
</html>
